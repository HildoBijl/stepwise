# Figures within Step-Wise

The figures directory has all functionalities to use figures within Step-Wise. This includes figures generated by a script. But there are a few important distinctions between various types.

## Figure

The most basic component is the [Figure](./Figure.js) component. If you want to display any figure on Step-Wise, it must be wrapped in the Figure component. (Many of the tools below automatically do so internally.) Important properties to give are:

- `aspectRatio` (default `0.75`): the aspect ratio (height divided by width) of the figure.
- `maxWidth` (default `undefined`): a maximum width in px. The value `undefined` means "use full width when possible".

An example usage is `<Figure><img ... /></Figure>`.

## Drawing

When you want to manually (through a script) draw a figure, then use the [Drawing](./Drawing/) component. This allows you to dynamically render images based on parameters.

### Defining the transformationSettings

A drawing always has a coordinate system. This may be completely different from the pixels on the page. The transformation between them must be manually defined.

Luckily there are a few easy ways to do this. Defining `transformationSettings` is always done by using a hook like

```
transformationSettings = useIdentityTransformationSettings(width, height)
```

These transformation settings must then be applied to the drawing through `<Drawing transformationSettings={transformationSettings} ... />`. See the [transformation settings](./Drawing/transformation.js) file to see all the available hooks and what options they have. Using the right coordinate system will greatly simply making your drawing, so this is important to do.

### Drawing something within a drawing

Once you have transformation settings, you must position stuff on your drawing. There are three ways to do so. All these three ways can be used together when desired, but usually you only need the first two.

- *Drawing SVG contents* -- Through the `svgContents` parameter you can add SVG components. There is a large variety of [drawing components](./Drawing/components.js) that can be used. Think of lines, paths, circles, etcetera.

- *Drawing HTML contents* -- Through the `htmlContents` parameter you can add HTML components. Think of text or even equations to be rendered at a specific point in the figure. Usually, this is done through the [PositionedElement](./Drawing/PositionedElement.js) component.

- *Drawing through a Canvas* -- Separate from the above, it is also possible to add a `Canvas` object to the drawing. For this, first set the `useCanvas` parameter to `true`. (A canvas is not applied by default.) Then, from the Drawing ref (use `<Drawing ref={someDrawingRef} ... />`) you can use the `canvas` parameter (like through `someDrawingRef.current.canvas`) and draw in the usual way with a canvas. Optionally, it is also possible to get the `2dContext` directly through `someDrawingRef.current.context` and apply it.

Out comes a drawing, which hopefully looks as good as you want it to be!

## Drawing inputs

On Step-Wise are various interactive diagrams. These are extensions of the `DrawingInput` component. To make a `DrawingInput` component, there are two steps to take.

1. Create a React component that calls the `useAsDrawingInput` hook through `const inputData = useAsDrawingInput(options)`. There is a variety of options that can be used. See the `defaultDrawingInputOptions` options in the [DrawingInput](./Drawing/DrawingInput.js) file.
2. Inside the component, render a `DrawingInput` component through `return <DrawingInput ref={drawingRef} inputData={inputData} />`. Once more, the `DrawingInput` has a variety of options that can then be used.

It will take some figuring out, and looking at examples applying it, but through it it's possible to make new drawing inputs, that will come across as intuitive and easy-to-use by the users of Step-Wise.

