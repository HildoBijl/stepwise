#!/bin/bash

echo -e '\nHealth checks:'
NUMBER_CONTAINERS=$(docker ps -q | wc -l | tr -d ' ')
[[ "$NUMBER_CONTAINERS" == "2" ]] \
	&& echo '- Ok: Containers are running' \
	|| echo '- Error: Container check failed'

HTTP_CHECK=$(curl --write-out %{http_code} --silent --output /dev/null localhost || echo "-")
[[ "$HTTP_CHECK" == "200" ]] \
	&& echo '- Ok: Website is responsive' \
	|| echo '- Error: Website check failed'

echo
