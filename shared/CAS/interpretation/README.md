# Interpretation

Expressions and equations can have different forms, and it's often necessary to transform between them.

## Froms of expressions and equations

- *string*: a string denoting the expression. Something like "x/2".
- *Stored Input (SI)*: an object as received from input fields. Think of `[{ type: 'Function', name: 'frac', value: [{...}, {...}]}]`.
- *Functional Object (FO)*: an object from the CAS with all the functionalities.
- *Storage Object (SO)*: an object containing all data from the expression in an easy-to-store form. Think of `{ subtype: 'Fraction', numerator: {...}, denominator: {...} }` When storing equations generated by script, it is stored in this form.

Note: when obtaining user input, typically an object `{ value: [...SI...], settings: {...} }` is retrieved and stored. The settings may in some cases be relevant when interpreting the given value.

## Transforming between SO and FO

Transforming between SO and FO is relatively simple.

- *FO to SO*: every functional object in the CAS has an `SO` property that can be requested.
- *SO to FO*: use the function `expressionSOtoFO` or `equationSOtoFO` depending on what type you have. This interprets the SO and turns it back into a functional object.

## Transforming between strings, SI and FO

Transforming between strings, SI and FO is a tad bit more complex. Transformation here is done in a triangle.

- *str to SI*: use the `expressionStrToSI` or `equationStrToSI` functions.
- *SI to FO*: use the `expressionSItoFO` or `equationSItoFO` functions.
- *FO to str*: for any expression or equation request the `str` property.

It often happens that you immediately want to go from a string to an FO. In that case use `asExpression` or `asEquation`, which calls `StrToSI` and `SItoFO` sequentially.

When inputting equations, there is on top of the SI also a *Functional Input (FI)* object. This object has extra data, like cursors, interpretation settings and potentially more.

## Dealing with errors

When interpreting (generally SI to FO) errors may occur. Invalid strings like `2//3` or `2+` or similar may be given. In this case, an `InterpretationError` is thrown. Every such error has the following properties.

- `code`: a string like `UnmatchedClosingBracket` indicating the type of interpretation error.
- `cause`: extra info related to the error. The exact value varies per error, but it is often related to the position of the error.
- `message`: like every error there is a standard error message.

Follow-up code can potentially catch such errors and, depending on the code and cause, specify a more appropriate error message in the required language.
